Title: TTS Report 5
Slug: tts-report-5
Category: Daisy Project
Date: 2018-12-10
Modified: 2018-12-10
Authors: Chris Andrew

## Work done:
- Wrote module for creating Audio books in Telugu using MaryTTS
- Completed building Tacotron 2 model for English, including real time waveform generation.
- Generated Audio books for 5 English and 5 Telugu articles.
- Tried experimenting with different methods of waveform generation.
----

### Model Trained
Tacotron 2 completed training for 200k iterations over 400 epochs. The validation loss is at 0.34 MSE loss. The training loss is also at a similar value. The model is able to generate audio for a given sentence in English. Here are samples of various texts along with the audio generated using the Griffin-Lim estimator for reconstruction.

#### It can pronounce out of vocabulary words.
"Generative adversarial network or variational auto-encoder"
<audio controls>
  <source src="{filename}/data/test_1.wav" type="audio/mpeg">
</audio>

#### It can change pronounciation based on context.
"He reads books."
<audio controls>
  <source src="{filename}/data/test_2.wav" type="audio/mpeg">
</audio>
"He has read the book."
<audio controls>
  <source src="{filename}/data/test_3.wav" type="audio/mpeg">
</audio>

#### Changes prosody based on punctuation.
"This is your personal assistant, Google Home"
<audio controls>
  <source src="{filename}/data/test_4.wav" type="audio/mpeg">
</audio>
"This is your personal assistant Google Home"
<audio controls>
  <source src="{filename}/data/test_5.wav" type="audio/mpeg">
</audio>

#### Pronounciation changes when asking a question.
"The quick brown fox jumps over the lazy dog."
<audio controls>
  <source src="{filename}/data/test_6.wav" type="audio/mpeg">
</audio>
"Does the quick brown fox jump over the lazy dog?"
<audio controls>
  <source src="{filename}/data/test_7.wav" type="audio/mpeg">
</audio>

#### Good at tongue twisters.
"Peter Piper picked a peck of pickled peppers. How many pickled peppers did Peter Piper pick?"
<audio controls>
  <source src="{filename}/data/test_8.wav" type="audio/mpeg">
</audio>

### Waveform generation methods
I tried different methods for generating waveforms and then decided on the best available option based on speed of generation, resource usage and quality of waveforms generated.

I tried generating waveforms using three approaches:
- Griffin Lim waveform estimator: Basic estimator, uses an iterative process, runs on the CPU
- Wavenet: High quality estimator, uses dilated CNNs for generation, needs to run on GPU.
- Waveglow: High quality estimator, uses Generative network, need to run on GPU(model larger than Tacotron2)

Here are some comparisons on the time taken to generate 1 minute of Audio for each of these methods:

| Method      | Time Taken(secs) |
|-------------|------------------|
| Griffin Lim | 2.60s            |
| Wavenet     | 12027.27s        |
| Waveglow    | 2.544s           |

Quality wise, Wavenet and Waveglow have the highest MOS(Mean Opinion Scores). Griffin Lim has a lower score but can be deployed easily as the algorithm can run on a CPU.

Wavenet has the highest quality of audio, but it is extremely slow in generation.

Waveglow is fast, but the model is extremely big and will have to be loaded on a separate GPU for processing. This would mean that 2 GPUs would be needed to run both Tacotron2 and Waveglow for audio generation.

With some post processing of the audio, quality of the audio generated by Griffin Lim can be cleaned. There are no real issues with the audio generated other than some unnecessary vibration sounds in the audio.

-----
## Work to be done:
- Do post processing to clean audio generated by Griffin Lim.
- Create text processor for Telugu.
- Train model for Telugu.
- Explore possible text for TTS data.
- Give a spec on how the data should be collected and recorded.
